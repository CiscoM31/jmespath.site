{%- extends "basic/layout.html" %}

{%- block htmltitle %}
  {% set script_files = script_files + ["_static/myscript.js"] %}
  <link rel="stylesheet" type="text/css" href="{{ pathto('_static/css/bootstrap.min.css', 1) }}" />
  <link rel="stylesheet" type="text/css" href="{{ pathto('_static/css/bootstrap-theme.min.css', 1) }}" />
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  {{ super() }}
{%- endblock %}

{%- block extrahead %}
  {% if theme_touch_icon %}
  <link rel="apple-touch-icon" href="{{ pathto('_static/' ~ theme_touch_icon, 1) }}" />
  {% endif %}
  {{ super() }}
{% endblock %}

{%- block content %}

  {%- if pagename == 'index' and theme_index_template %}
    {% include theme_index_template %}
  {%- else %}
        <div class="container">

          {%- block top_rel_links %}
            {{ render_relations('top-links', 1) }}
          {%- endblock %}

          {%- block document_wrapper %}
            <div class="row">
              {%- block sidebar1 %}{{ jmespath_sidebar() }}{% endblock %}
              {%- block document %}
                <div class="col-md-9">
                  {% block body %} {% endblock %}
                </div>
              {%- endblock %}
              {%- block sidebar2 %}{# Place holder for other sidebar #}{% endblock %}
            </div>
          {%- endblock %}

          {%- block bottom_rel_links %}
            {{ render_relations('footer-links') }}
          {%- endblock %}

        </div>

<script>
$(document).ready(function() {
    $('.jmespath-demo').each(function(i, el) {
        function evaluateDemo(el) {
            var expression = $(el).find('.jmespath-expression').val();
            var inputData = JSON.parse($(el).find('.jmespath-input').val());
            var result = jmespath.search(inputData, expression);
            $(el).find('.jmespath-result').text(JSON.stringify(result, null, 2));
        }
        $(el).find('.jmespath-expression').bind('keyup', function() {
            evaluateDemo(el);
        });
        $(el).find('.jmespath-input').bind('keyup', function() {
            evaluateDemo(el);
        });
        evaluateDemo(el);
    });
})
</script>
  {%- endif %}
{%- endblock %}
{# Displays the next and previous links both before and after content #}
{% macro render_relations(class='footer-links', add_spacer=0) -%}
  {% if prev or next %}
    <div class="{{ class }}">
      <ul class="breadcrumb pull-right">
        {%- if prev and prev.title != '&lt;no title&gt;' %}
        <li>
          <a href="{{ prev.link|e }}" title="{{ _('previous chapter')}} (use the left arrow)">&larr; {{ prev.title }}</a>
          {%- if next and next.title != '&lt;no title&gt;' %}
          <span class="divider"></span>
          {% endif %}
        </li>
        {%- endif %}
        {%- if next and next.title != '&lt;no title&gt;' %}
          <li><a href="{{ next.link|e }}" title="{{ _('next chapter')}} (use the right arrow)">{{ next.title }} &rarr;</a></li>
        {%- endif %}
      </ul>
    </div>
  {% else %}
    {% if add_spacer %}
      <div class="clearer"></div>
    {% endif %}
  {% endif %}
{%- endmacro %}

{%- macro jmespath_sidebar() %}
  {%- if render_sidebar %}
  <div class="col-md-3 sphinxsidebar">
    <div class="sphinxsidebarwrapper">
      {%- block sidebarlogo %}
      {%- if logo %}
        <p class="logo"><a href="{{ pathto(master_doc) }}">
          <img class="logo" src="{{ pathto('_static/' + logo, 1) }}" alt="Logo"/>
        </a></p>
      {%- endif %}
      {%- endblock %}
      {%- if sidebars != None %}
        {#- new style sidebar: explicitly include/exclude templates #}
        {%- for sidebartemplate in sidebars %}
        {%- include sidebartemplate %}
        {%- endfor %}
      {%- endif %}
    </div>
  </div>
  {%- endif %}
{%- endmacro %}

{% block header %}
<nav class="navbar navbar-inverse navbar-static-top" role="navigation">
  <div class="container">
    {%- if theme_github_user and theme_github_repo %}
    <div class="visible-md visible-lg navbar-text pull-right" id="github-stars">
      <iframe src="http://ghbtns.com/github-btn.html?user={{ theme_github_user }}&repo={{ theme_github_repo }}&type=watch&count=true&size=small"
      allowtransparency="true" frameborder="0" scrolling="0" width="110px" height="20px"></iframe>
    </div>
    {%- endif %}
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#toggle-main-nav">
      </button>
      <a class="navbar-brand" href="{{ pathto(master_doc) }}">{{ theme_project_nav_name }}</a>
    </div>
    <div class="collapse navbar-collapse" id="toggle-main-nav">
      <ul class="nav navbar-nav">
        <li><a href="/">Home</a></li>
        <li><a href="/tutorial.html">Tutorial</a></li>
        <li><a href="/specification.html">Reference</a></li>
        <li><a href="/libraries.html">Libraries</a></li>
        <li><a href="https://github.com/jmespath">Github</a></li>
      </ul>
    </div>
  </div>
</nav>
{{ super() }}
{% endblock %}


{%- block footer %}

  <script type="text/javascript" src="{{ pathto('_static/js/bootstrap.js', 1)}}"></script>
  <script type="text/javascript" src="{{ pathto('_static/js/jmespath.min.js', 1)}}"></script>
  <script src="//static.getclicky.com/js" type="text/javascript"></script>
  <script type="text/javascript">try{ clicky.init(100732121); }catch(e){}</script>
  <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100732121ns.gif" /></p></noscript>
  {%- block footer_wrapper %}
  <div class="footer container">
    &copy; Copyright {{ copyright }}.
  </div>
  {%- endblock %}

{%- endblock %}

